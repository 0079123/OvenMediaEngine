<?xml version="1.0" encoding="UTF-8"?>

<Server version="2">
	<Name>OvenMediaEngine</Name>
	<Hosts>
		<Host>
			<Name>default</Name>
			<IP>*</IP>
			<!--
            <TLS>
                    <ChainCertPath>path/to/file.crt</ChainCertPath>
                    <CertPath>path/to/file.crt</CertPath>
                    <KeyPath>path/to/file.key</KeyPath>
            </TLS>
            -->
			
			<Ports>
				<Origin>${env:OME_ORIGIN_PORT:9000}</Origin>
				<RTMPProvider>${env:OME_RTMP_PROV_PORT:1935}</RTMPProvider>
				<HLS>${env:OME_HLS_PUB_PORT:80}</HLS>
				<DASH>${env:OME_DASH_PUB_PORT:80}</DASH>
				<WebRTC>
					<IceCandidates>
						<IceCandidate>${env:OME_ICE_CANDIDATES:*:10000-10005/udp}</IceCandidate>
					</IceCandidates>
					<Signalling>${env:OME_SIGNALLING_PORT:3333}</Signalling>
				</WebRTC>
			</Ports>

			<Applications>
				<Application>
					<Name>app</Name>
					<Type>live</Type>
					<Encodes>
						<Encode>
							<Name>VP8</Name>
							<Audio>
								<Codec>opus</Codec>
								<Bitrate>${env:OME_AUDIO_BITRATE:128000}</Bitrate>
								<Samplerate>${env:OME_AUDIO_SAMPLERATE:48000}</Samplerate>
								<Channel>${env:OME_AUDIO_CHANNEL:2}</Channel>
							</Audio>
							<Video>
								<Codec>vp8</Codec>
								<Width>${env:OME_VIDEO_WIDTH:640}</Width>
								<Height>${env:OME_VIDEO_HEIGHT:360}</Height>
								<Bitrate>${env:OME_VIDEO_BITRATE:500000}</Bitrate>
								<Framerate>${env:OME_VIDEO_FRAMERATE:30}</Framerate>
							</Video>
						</Encode>
						<Encode>
							<Name>H264</Name>
							<Audio>
								<Codec>aac</Codec>
								<Bitrate>${env:OME_AUDIO_BITRATE:128000}</Bitrate>
								<Samplerate>${env:OME_AUDIO_SAMPLERATE:48000}</Samplerate>
								<Channel>${env:OME_AUDIO_CHANNEL:2}</Channel>
							</Audio>
							<Video>
								<Codec>h264</Codec>
								<Width>${env:OME_VIDEO_WIDTH:640}</Width>
								<Height>${env:OME_VIDEO_HEIGHT:360}</Height>
								<Bitrate>${env:OME_VIDEO_BITRATE:500000}</Bitrate>
								<Framerate>${env:OME_VIDEO_FRAMERATE:30}</Framerate>
							</Video>
						</Encode>
					</Encodes>
					<Streams>
						<Stream>
							<Name>${OriginStreamName}_o</Name>
							<Profiles>
								<Profile>VP8</Profile>
								<Profile>H264</Profile>
							</Profiles>
						</Stream>
					</Streams>
					<Providers>
						<RTMP />
					</Providers>
					<Publishers>
						<ThreadCount>2</ThreadCount>
						<HLS>
							<SegmentDuration>5</SegmentDuration>
							<SegmentCount>3</SegmentCount>
							<CrossDomain>
								<Url>*</Url>
							</CrossDomain>
						</HLS>
						<DASH>
							<SegmentDuration>5</SegmentDuration>
							<SegmentCount>3</SegmentCount>
							<CrossDomain>
								<Url>*</Url>
							</CrossDomain>
						</DASH>
						<WebRTC>
							<Timeout>30000</Timeout>
						</WebRTC>
					</Publishers>
				</Application>
			</Applications>
		</Host>
	</Hosts>
</Server>
